language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: lXa+AZ0xSGdNDKOKQIe94mFamAVEXE0zpxgLubp1uYvWqMktRYZrkgtcKFXVHsJx4t4ZAtzOqnPRSKY007CpXqN9283cHd5Uh4k4PjiZlWLFV9XqsEn3zKSojmfUoMMzhjUjii9A5WxH0gDCfDVcr+1c8m4hL1LlIAB3p1jfg/7OvhDgEu1q6yjczBCSAp0XUb8QBNAmkgiYfOCkmQKjG4V1L4b/tDBMhlfO1J6FBn6UPTqLF4doun+sFNjybKs3sCTj49R0E1bgMdRicp0ZIbQU8oUa9lTJaKG4r322IgOWzfvhrAASve40y/7tN5mkayLL5v0kfmGltBzFZf5mIGcpxdcuY3Ydbmru2S9d2/2jpQneGTq6vroG3FLCrE0rWE1NQzWdE44WW3gPO5zhPZbL/FOQEZAu8gSQyY0Ccsjg0EwPS71FqwdclPVL+nl/PH2bavvJKs9w/9uQsXmp86uxDDZWI9Gkj4ljZqYaBDNeJfxFQLiAW4saKlqHZkxGUHP2TgNR1oH5DrbA3hjpruUzR4yEUiNQhP84xCQU/cMXUrEUHibsk4E8p4a7gZQ6tbxlkZcf0P34qme8oTdJYorslEJg+BMyAMeDvnuu6MbtIyG1RMq1HR2LQhmVjIm4GAn6GTIcbglpHISjB6ER0Z6nollm4SQcGijF13j+k00=
  - secure: m2ySXGFo9dKoYz+8DGTpGY6dn+2NjVCo1Qyhy03V0Udn51koLpL6JMBhdcjO7DFf30aFCCEl1GqL0gPu0+pXHPfS1qePSN/jnn54lVeh7kW4RkcJxfHHKB7jT+4qXkGLiIRduSoYxvakoOQ66auN1ANnD4Oe6JjkqVqHdPsXoCuLH5bY9Lzq8cAbY1Q6lRe59QwqV6FtpYpaDM1n+ge5I9GHrgf3QQlE4Ztmtv7BhuzBa6usa1TYqPpaLzM6ILV9Xz3hjQzwzxeidm460Q67nPb48vF8uzf39OK2f/1ArLIzI8/a43mMThuvWsDPcB9TZlHscYtImDpZoe+Fmwb+yVRuFyJeYCuvIExtfWBbcIEcMhN+F302aRlUbNYm/3nSg52QYFR4NPKLISezd4tHnF1X8zebmV5qU4uUiHiF4EoMDGZufOIrqzHbzh/S6CB2j5us95v3/uEhLgsTWo0wzXtj7RZ/nGA9yT3qVlSBA9agSnJ5xvhVnFLd2T5t3PRZ3gN3N4eAA912yk77MqDviYHJl4Kcf4ed3IbEYAUYNy6KNP+FFGyMa2tphaPqYfjDvl4rjtQxUBaxUdTY9VKy77YNsh9U5hr/KS1tDC2lWKz9aGN7HHkz50D9tMyuwdcY+Kx/Nxz0TU5mZLag3KAsC2pu0Ano5Th0r4MH0i4zo7I=
  - secure: Q1ADMW2rl9HJ+rcsePc3qALIPJ/gVK9kWK/Sf+eKQvWHHq891PdIirt7TZ/I/+9xE+OICMO9FW5XNooO7a8vxaTp1q9G30GqVjaHgyD96qA+djEq0adYgPdZOChMBErl4VNkT5tqgLRavEzr5VpRGs4oJeFYDjTTORj53be48cUIcQKU/l1xSTNNsevxJmo163aXd/9IsqQxc1QxnSFs0EWMOjnjoXDyXUIaev8oEKPcn3bE4Az8XELXJ/KyB1cvK4VR2g4R1sJnk7taf25I1d3HAhfx7oi5DVTGvBrJTbTkpxcGvZuwcj7mpBfcvDM/KUof9vCFBXJiWywcuf6zQuOQ4m6/5JOCYapZqIOTWPWB20kAw+XmaR6pqZLmsNfBuKefbli86oVL1pRFE7as7foJw0yo8cEqzgzO32U+vOo9EmIt59dX+ePwp9mSMMWgAVHqT4PVYie3Yh0fpnHVNUlhkwmNl63y4qKJIqTZsKa1OFjwdjs0hW2HaymNKm0zoagSz5l4AMUlpqFY0WxlDzTBNGoMIPC333P9WBxc5KkC8dbrSevaINYAySEcWLjAyeeqV2m2jVvxBhBspjwOlDJZ76sCtYMC6zBfNCw1w3rM0Oa7md2VrfrGg86VY8Gjt0hNYbJq/gT/LXdzhCO1o7tUz/PrACHCfzGN0TRoUAE=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi