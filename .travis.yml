language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: AG/Kb3uaFYio335RZLwHbbuqsSw7lnZboCtnhZhhxaiiEzhiS9C0a7QCGCcI0MXMZCboUO6hM0ccOCiA6SEhoD2M9twq+ovnooBemxNvJ3ehwDQvIQ4NKPPhY1JMmSUbBrqsXFtTfsWUvvL5VAwzQISdDc3O4pE2pCnEzJG9TC9UfT0ZWX//LoxgiAWH5A2CyybNPUpFgIoZe3acRon0nMXcNgVSQu2SibVZV7HNg20+tPWuBLn7gP9DNOnaGlie9m52YPfNDUAafKEJB2vBb64A+pxP/pZ0li2TBU9E22FVS17u98KBTw0n3lx558gxTDYatK1g/DPIMOSX69tJqrTEyho6xYUFgw0GA06EZHBsB9343/RMuGpVBmrglXJ15ICPQKjvbIhrh/qRz9sjhrUMzBcL3QmEZZ8mPb9Syx+oa8UX5XyOkSErMsvaJAkBN0XXKkAgv421eCXk88Udq42S0EOY+o+IcQaP/BN7l73+Q6z5bCVe/XiCO59TuTP5LkdzrRUnPKrlUriRJ5h6XuUcyZPSZO66BXKQ6CMSuji5RYXbyKg6+CozIsr1aEZlMBHTOYe4Tgound6e9J/26WdtSZfbqSel7yIfqHSyQ/X42pDIPISB1nzdoA/3Uu9GXWKWn0WaXnto/49bOMNuQLGW10cFKN0OSkMJWTeMDdc=
  - secure: TVOmcNQQpUBa3Wwu0rZFnErmaYin9egAuHFe27g1zlxr5DVFZhEygK8z+s/UBuHTWcpLEzNUy+Nf/mJFYBEcs720PsOg1+vwYQkp37EWoBhpRlHkur2OK+/NMvl3KqaC8+BOZBt7SHa4Cx+Q/4cXdG095kXDHV1OD6XV3i+Zc9+juP94ZAqXTyoI59bk9Lg8Mj7OOf/qfuNNQLIeQnhoeBEKLJXXzDpgtXFFM4rr9ajS9ar/rVoo/G5ydApYTdjyS2lTTNL837SuK2w4McxzKkB33u9fArBq9pV5Iq33kZYXsFRzii/weQymws+qr6QhYG2+OaaUNU4X3mOknQunlvu8nnSdNaWHL9BshhxmL+1PZTGz+i2eMekHfsg52rGpe6RTWkG1kKIbVYgYUG2YoVALmiB5qjfPlD2mh7vwAi6s2ft0MlUURQIMMJSZMtYC0Y/N2hItJFqgl9LOgOIoYsVjfh4RSBQVteCSbs8V25DiVjOg5snigyrgcADIL0nWqi+oalILCsUnb+1tEBpJRppGu88F4UQdrpQwOmPsHxx+7AS+4z8U9fTAfWoVJ97PfL1nH024LdYXh/u95dp6RNrXP6vV/dcbKAOdKaJaQjJS6XdkaT1xQFR+i6RRE6vPuC+2/nVNhHC87NmgOqx3UxKqwzxjBC7adlcJbLk/Wt8=
  - secure: MrPl+HkakqV12QEVtBzH50h5c6rYOKKclZseQ7Sg+CN/g5CQDH7u3gkT+C6iBl+rEDtCry8I2OQcDX/apYEuhqNv9B+atfvFsQ2ugfIxN6kmKBcGw1Aa0U9d0pI3BdDRkyGk0tZ5eGgjl2BMhXZX3w8cIxTniCa2LRWmuyiWO2baxAxpntOHbZFXyaiZhTZS3HQ49G5KXh9uk+aokt4A4g02rHsSI5ipnePQjC8nviZ0bJCpak3L0ct2lZFpLDAlIMxWIbetxdZxmTtLeoXFqMYxoyX/HOy61jlnLFS26DZJCYYSR++58zO/aNmz2MGE/rZaGsmFKId/bm+3DjiHoNeXdNwGVfUb9G48xDxZOGgSylELd1jeQ9HzVJqVBUTqApSKD/JZfMohOLgnZa98olsWWShB/5mN/qlXDngsN5I7RG/ntgI3Cf65ZNEdZgCH4kmg6QByjloVFjc6rFcQS7pCoGUgE4GZZjtZl3662hP3q37puX+LDYCiVef77FU1NVjzZyXUDPhVTa7zmSXMqakLak16M9cR89YkV2GkrxuWef7SfDQ4FIknFrSnS+nri2MGEcn+TJLSO0E3x0bMP6InBljj+3ZhohZ4tFt9/DFOXbhzRG9wEXrdOUsMrZ6Z13C2rR1MqwXqTXC9mW8R5huNHB4r5eO7SRROd+fVqs4=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi
