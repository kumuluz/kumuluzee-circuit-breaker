language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: Jz+FRPDebhh6h7IFN54utpfqWFTrRFo0Ss9BHuHkBtsyUV5Q1j81sVF5geiAVg3cYQwkMnYh/F/3w+CdXwb31US67lFvitHjE5PyTlYkpyeYgJLEOBj98p15ox/TJgDiD2VWcn7nrhSVn2AgLfWCq88Jd8EOO5vLaqss3FgE4Pq3m193O4cDieUmuYZJShbkCQQbMLBGIvn9TZRyjHeDPk4ffxDTNcN/JcfOOd2kgoqT8+9W1mzvTBksXHqs1NmffV8HwmtpI0nedq+4BE1Ww9VAabFq3EqBBAOnIpOZtkKHnQvsAluQfFiJWkgWmtsYSaUR4qOk2xiciqPOH+IjkpSX4VorQATpMKa1vSIxtgByIwC6KdorXENhA3r6DNeeFbWCbOf4kHfujU7CZhr1iV/xH0IvXsFhAjK8304dnjSjHJ9ay7zggpaAyFh/kPcC9Wo2lb0LpAsJWVLlRl1zlFTNy/W/GtfwdUWA4uWElCZh0NxiVnPc9gfgd+5TxIbhycyygVvW2DlnbKP/qaskXRqJ8dOzOMadg4+FC5fAjgjZk6YQbkLitginP0o/kMQ4iN/xNuoQjRzbZq7PvtNxsk6XF8ps+eeXLTFFcMZLGp7xpzhx2qPR/j6ZibI1BZsjw+8EwWLY17unfVqRENFth7mrc2OVB7L7C3YzxHE661I=
  - secure: Au67hfHrfY4vJv9sID+CD2CC9jW3YgHwInLEEJzpIAmCkStlLQ1JLe2W/x0IfBGpePukti0BEqtvccL7FFuIqtZ13KDE16j451CiM3IXrFCYMgIS/66N8oenFhRiiJ7iAT+JNKMpXSJB0Y3MoAkrnPQLUqHxfLZm1SHYAUoUa9zvjiwD7ciaM7KOUzd/wqaJQa9+Bb4veZcxhedtDNzPrGWRoXW6exV1vgeTURKFF0PtDgjv3CmxIFHDud9rLmM3EI3Kf9/6axnvT6TAlQSJAvf7P9jRGoGkPA7fj1JPyBCChf9a/nHiVik6eMKsFN6McSGhGap+uN+5kvKRtu0pdOuX4r/J6pRKZPSuK22WOnBUlLRFJ8P9NuS7pnsYx28fgPSv4WeGfF4Ggv6K0Oj/Yy7p4u5AUPiHdFd5NnwD4JCbVG0823rtwI7r5u3CpEfPhFEcrqsmxyMQOBRM/7/4NB9w8/R5kmnsinqOBYqDqklL11a9/BAfQdtPDhC43zRrYgE+OCg07XB1FJu9V74+wPN509Z8vyn9kHcF2KHVcjPdbENB3+KlUOPOuN8u5jZw69Zmq+27kL3BU5pr9qFoxgJyyWQ+QW0nnbC1//VYfo/RdFnsL/+x4/yXKPxggqd2AkTCxIS3GYNBU//YWDGioJlBQJIARgYKtz0uGSZsS6E=
  - secure: HLIPcl48J69zGdKdQbCXtMY+1VDHVnuWGud8873g5tU2eFcDW8j16QW76aupxRP9yjx8P2Ah5HlPZIxDwf0P1S3Nn8Lg5LO21d6H5rNgEC04PWV+J/l04JXQaO7AiaS40o+fLfMqtkqgaK5pk7YB6Cmenqh4zklwdqZJLBpdXfOkMko2QGSLlc1J2PlRyDjUB4jt9LJ8gPDNQJ9XodCjb4bd5NyhSXHH2z5Y97QI7xSFoPYCompow8Kp8aGmuafIZM9vHkCMllaLHIdz5DtJPCHZOYljoaMtp2aGcI6/JTB5BrS0j3tkyB+/Xnwfhz89eDHvmfFjX+icEEbvnO+wAl8v4r+PqUW61aWg3ki2+QhbhPqqzEhgs7G38Z04Xfq3BXBRSAkMPZXq2Xp+A81a1Ki/9w+qGV3pYK6qb2kJyXmhLkUhLFvBC1KjuQuhXqHXffVQjPozmc2Z+wTSZaQ/X1l/OOrjuNc2Qqz4ICT959ZBRb1N1un6/m9ZGrasjY2/n6VMRzM3bq/f34xmTI0v7uaOYJQQuzYLKijS7yGn16pBPwgR4djY8+HAM8MpvtdNlpYmLDbHRHchpenG9FMeUDDM2FM+TjMp6HgXnRYK9nKdqavd4kldSalwdkYClD3sq+5EuFrdnTdiJfA3oNkBRGHNza1FxbwZpBQi6HwT0UA=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi
