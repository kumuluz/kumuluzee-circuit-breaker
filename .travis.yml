language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: "VyQyAmKQ6zisFJ+B7b9NX3gB0s1tuhODm/1TDPbQrpW7mvM/twvulJv510Qt+t7Iv8CA0P6rd568BU/s1rEZmMRY5WKws5q/nZRja/APpnQ3TeCUpj2DcpBtZvHf2JiN2sLloMSVVJV9tm84s5f0nUQrJ8l59gtnZTRDT1EmW4d76cnB02GWdf485m+w8GPKZy+oWqwYOIevH+eJD7O1WH1Cu51okg5Wh6tNVe5xq3YVUJxDQgrJSbRzPDKWuanXJf8E72n8IzvyjYMXGENudu1YdabQsLO6z2D9iNOBPVKjHKMaviLUMseyYnoRzBdyNDtN85MtzXlddn4SK4AHZfIHs+A7Glvlrvwy48JVBM7enLrzb2G+g3PmVFvu/9+pFAY7BeFcxDuOwcAsKTumEdndzhZ4yMd+qYSg9n+bcmThYds4dqAgUbnui8Vvc4oA0uehRJiN28bgNNzfpNqzg4f7soTLuP44ZK8HRpiKld6Db7lI3Dy/COaqp6n9Tt6jciRSUWzs7iftSBA0f6DdsGbiLx+G44VGLIPA4aeckth1ifxHETDA6k5NkJh0q2DAVri/54bk5RWMMPdVZrdV/IvKICjN3uUm6M4uUqcDA/yGUU4F3Fzo4+/i8Kzf4m6jmpjY4LDEZ3zElNQPZigvbY/Rpc/WZ+YMofpQ4me2YnQ="
  - secure: "dkbDnqVfR26Oyj1b3XEY5X/EXG5rOU1f+uZ0hEAYgsEfIlCIiKiS1iVG/bURpTilQw2u2f+9f5QHnAUam+A97SsFdA+MHb2eX53gZpDA4UaHdGnco8X28OfdN9ShyZFGgaI5OA4BXEBy9rBy79bZ8WjMMRLqCAM0PFcSG10otF0FZRTyusTSrLtFQifbtjVE3VGSGpTtdFe/6yf39s3r+E9lQNO4uh9sExTJN/9u1INBSpRmEFyfHXrnC4jTnPI05IvbDKJEIcOeg/b3hKPJ4vr/LumVeY7Upc3QMTGM+v8gNK9VrPEl9YY2P/43d3fxEQSxyPPoijyPH5ZxBhzn9d8nb1SWhf4ep0fPCcR/LGOHPFn6PXCg8Vw2tv/lHrYStMPBrKipfwm1Aao0akbQmCgod6SiVacsxx3/PjuMlve0/xHWxpw/NmgCxJoiynGDhXvD1i18bdJsvd+qnHqb6xNxDGjPZgLBAI8Ph575ju/LF6JPG0wgcruJEb8Q98cFnLf34FUdbKX9kHIwH5mycPsSMSOligluZF/XPHKa+ZnxHn7bIrixFmqkpXU+18fqWdBlKF9cJGF1toKKQAnd7Y5sReYDHYLh6kjVhZXFBpa//kRER59tOjSNJMaECIm4NI0zGNG5b7X3yfnAUi38Nq6t9eZLzVr1+obsAleE+Bc="
  - secure: "N9a//rHFPmhVfOGKtoz6+1IRnzgc3xjH34ZMnNFKVLO3KmWjUpF6NYHbuQYlQEsZuoyXwMQdcy4qC162ZcJMh5d6plhHTkwiiF9keyQ2xL+9lj7rTRt4LheuYIffZUPEt0iKp/8NFDLWgs0CAwC+qK6YQiR/+otyqNmIVKCSOCouJEfzRleD6jsmqyxG2qfRC8JCEyQQaPiilQT2zscpszETyyxm+cLod9qUAIicI9k06wAij7mb/FcIvtnn0VcJGHV+5iktUx6OPxGzLR3Vob5PB/XIltro2eid+tRJKBVhgDtqmbEtSdvkhTKbe6py0onlmn9cYwDDaqRnnnpW98xG+lnt15M1yPrVhhBTH63mtS3GSGNzBa+gazBrO7yl2OTjriz184pWExY7embyBb+gaAQnBsJqGQEWUpQOMHswvH9GWtQcuwnWJoh+fp9acbPzm6H9/s10bvmtlEolFJCst9P+LkxooiRDAZ+aridpT77vWjH47oHC6vr8qPFJXL8SkhCH8qmeK5j09s/FoVYuNDBknzuNBYv/i06v0smPUZke5pS3G6QIC52pIPd3B/Ytz2agSm7wjXFsaUKRmN6OBJDIaMbVJh9h60s22x9GAaFtH8yKDsKIEzg/PFezGx8MjWkwDK/88Tw5P9K5CI16taURmJNsyxYsUzVLpfI="

cache:
  directories:
  - "$HOME/.m2"

install: mvn -q clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi