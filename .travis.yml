language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: nUpROiRvxJ8K8SNyAtalQg88jPk1Zx1x4SyQsQ/wmx1F+nHF3bkfV8j29Tlv0wqp3bY3oMpmF72uuOg37GLlVNWSS9+mZMx5ybamHOP4BMXPQm+qYLh2mvMUiVQIMVjF2CpFA2vUVqIU2ECaDGVR74Ode69gLr0IZ9jA+i+4hXqEIJAzgxGjSXinSOIFK0qdjFa0XbHUWhc61nDiu6STBxOluNgSQyilOazL4e4mhY9eOpeTacq6locq44L+Sdk/TJR8cvei4wPaqoUCA20FQYwOeCUw2T5ivX5TMTJvr1qs8mNk+TP+i2lm0Z1OQyKJTlTkpgh8f62071QBKNLDXFoFGJZjO6m3bb1LqkDm/FnNyeCJh/KydJzO5rtS4PMUwpTozpAQ3jP2cQVtgQuxH/id4ic7eDToQ2oqCyV9ba8/+j9ePSLNJVeQv1yGa5u8rVSxLM4y3FWrOQv1hCvJKrHmRCZ4PKJ020wcXnDKm4eVkfRd6pJGMWEF5aGfj23cf3apBsroq/P4zvaI+QlunKV+HkRP7U8qDTXbJUvFkiDuDMdVAzw8czfz+gu0MQA4Sht9QO7eu4EnUFPCUXuj4MFqBljSdroTutHX9W7BHhGBVdzRWbQdzAY0Ldw1g0hy6vlIicmfRlUWU/vAzfkhtTZXKhInbLIl9fWEd05KutQ=
  - secure: TmJHK6MuaMgrZ2hb/5suDg24g8B1jzCasE6zZQinBY7Ql9/zW8aBCYwE3yGES7IdxtZynu/GMkBeS3OXSgUlnC7sHSW5c8ovxomryVq5MSNOkHHHxR7Qale/xwduI+hMf2XskYsax3qKeafbs4s7/OfrAGfKQwURTiQJ0UOkS+glpSKk2Dx51WvdNdwCoSuWmfxOEd1hZFovu9i3dAST+WvrbvoLdOxrpDSbTzBjQdIp4hlmScuYpGH+nHAoYETt/IjYNC9SGNt6gEOpTmU/b9l0GCfEy1vYRActPAcV3eE7VCgyLi+vQjC0akZSb9aZ5tNnY80dOXvDROMAK2nRLnnATZfXjEAuv5S8VZUdpPOLEP/2D8ElYWGJOlbhLUaCvQkNLrgbIEKZd8t2DQtREwTsx0M9OdgMbYTyAbgHpT1B19z+KQVwkHAFAR6NINrgyX2Fognk0rpHrKi7xFyXacZy+BYRSqe7bZv8Dp8GeiT5Ru8Xm+2Dtix0C1AiUPnQ1zHrmkKMx41/LDQrRCK+wyEfQPUXO+clZEVR6Fh/vqT7r3CkLl3UTLVjkBzAsknYEH/0HkhQCK4G518y07g9YzPNqTps08RALGw9K1iWGnmgROUHDjlCqgCzSfQmJ47TNzbdHWARkJTKYirhWaylC/HjGb7E3/OGS0teS3H/v7g=
  - secure: bxZQuBrUUaVjUCtWp82y22MzXcgR//MUPkhmkMPREHBPlWRQHOi+GdqvsSmhZhJdS098/a86I60k+bz9ipEuPbxwZZne+Wtm+XNojZtR1UdA6wzCeadRjmGCwQPmxBtHKF7Fiy6e3bRQ+zAL0tkWNOVsqkAFlkwpsn13tY+kq1JWn7ry8XGNZzEyM20AqNvWbfpbD0GHkK/pDXjHN0tR1HSJLV1Mf5dLb4lhI6kP56q03zq1U5Y4y0a9L94+QOGLC6SfOLXreBZqCYzD2wfmJS6ni+/fpfTxdVXmWzM0/AawdF03/r8ZEcUcNyGHVgQfAOJ3tzrJOAY2+Hg4HJo8pUob8ztuasfrCdkK/4EBOztao4/IY24imEjE7NOyqsj9/gOy3JEnGldoW0M98FI2pObJH7o84fHrRKQl30pFFvMoI6hSOZogDGnsecBJbRksoZsqTEDb+V6MHfrX33a4jvTV9mSzED2WYC+cbN6aV14W+nYKA02bLYGSgw70Yo2NXafnQxydW9nei/tnhYkFWCcAFuJ/6Grq85jlUaIS6jF95lmkAzhtaHoc/cm2OkuJsR9m1G80k/hyMKVUeOMdKqTrIhIEUBzpD0MHPhSFC/LI8S+74+SNWEC/YyJ1amWbNXHc/9uleTnAFKtLmqmOcR9wSGdCjQe7KnMJKwbHfGg=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi
