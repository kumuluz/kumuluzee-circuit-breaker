language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: Bnt4IbqyaCnqX5wna4oI4fOb1ww6yXUtf6IJ6s3qEgTZzvIYO++cLAUhLzIljGOCNNe472/kHuD+SILHhTHVRVBwb4UUYDdvNx61AVhnPet1WTyRrlhgFXsY1VaCh3n91iZPDjrkSXMOtcDHWMLg0AzeaHR6/3pywGAZ6C9OxqWVyjS0MlnPdkZqsr/bNSUm0QZkuWx0vdKmMGWpTBRoEnREZuDd9RnoFXkgDFHD6ioRScib0qU0birTUlRt7hi/dFRWRhcjKa8duGIQAwdHK73pBlYp0XWf5oFvzeNhjMsaWJuR+ogkch/2+dnEJIz/Z4DFa3Gwk/F8jU9QDGknI1IyJA8UKfrI6moJz899i8lNgzziR+vWO78W1zd83TcCiNWj4a3CZZr1C8XACVlgpj96N/O3N1WcElN6RCQcpiVvxLVOeVBYveRoCTQ87uFAHJKwZPd2LBourBsyzKhmhGbosTjN69oTUlGy+dL1WHbZfktr6l9cHPbDKTjMWABWnHW2jb8kImoI073q2hk4bMdTqDI2E67XeK3mzh0crsTdxL4pK7USvvMpozEuj9Qo1XyfdI+acCq/t9rv67bF3U+lYdPEgKlDGxgskDEf10M0gm8eu92/hDvb9JwOlizfMaCp3Q6NgR3nD5+lolxfGfkJH+OtHs2qATWvEE5Z31Q=
  - secure: PD9YUz8hQ/6Y3IBTu4Weh7l9LPL/RA9CJl7FfzXApRgwWVm+c7iZ6T64Cd/y+l/wRWeD4kgdZg7RToJ6pq/LpzY4GEosNnRZJlQkYkW1UV9cWyOuJFu3zbbWcpiXm7RxBLvrkqZLuBR77AK6+ckcoLU/LupaG/8XKZxzAgFAxHf2Rye7BLFSFvaFcI2EWOOq0Khq0LGk+x4QFfMijAiRJN131ZvG4kO5Fy9nSXmymIazYY2q32p5h5tonQM7KLhgPSIw9UPMyQO8jaiD1IquJWxTFYANd+693Hzrv3Tw6EUYzGI8xfTOldpOsZeI+TKBVqp/GrW0hHsevys3TdLQvPFnlzuwvKAFHf0HMDYjJyFcDHvRvUfFSYVTFWyEft74KGJEA2LqYlVe8Rxo9+Wwmcfhrh8Y6d4l+gYvNnL4kYIIVLZrAZ3k918pp3kBMDJydF8q+anDJ8zAPLxVy5YkXynjR2MK+K6eU/ApZV+SRLHVnnPYkdW7FS/6NGFd5ZUy7vF17VOgYqihDoVA6are9SgdZOJ4NmNO9eXCf3zUbSTzSyhXzM6oCz0Cn3FEIFWD4KYaVsMIywo9amvQiRcxRL+srGp1SkFOIgGfj9pPasNrArh7HMmZrAhczgBiBk30XjvF+X8qcbu/dMDkAiAmavsMP63UFGVAy9EhkEtkX6k=
  - secure: KPWOSWVG+dsu/xoV54/C1GY23rFooL/rf/m708b0JQnLFC5YiV2S1ZcMChjJMwWud7uBGaTIuGWuTtoWpJYgOGGNv8GRTGS4vggMFWPIJmRBsVYseP/GfkjakxBb7wzVIq03nzuknddqTDEoBocZrWR1hngRHuQ/iQnUrSrn8ybTVtSBi5VNlMmyZwY7D6QQ8p2mN6HjfR2OYQRg6Ri3S+ExpTrpQXIucgH4PJVzEsutqthwcAe8ix82HHEyVROTQdPuiBD7uZs4N8KYYElKT7piei9e/wQtTYcALxTladH3+4S9w2RlCTAPKe50VJaxS1jKPbH6LcJe6LkDPj7tnG3c38d5wbT+RxqG2YQKQqIK329Ekup8u8dcmjG2FQzcVPzUKOChzuW7GSvnFwxnKGI01xK79+PNrBLpyhCW0drCfmcVuv8afDkHGXqS/G+6ZgbK2rHMfuOfetgytrUF6fPOJtqOW0piqZa/qxw8TGU9opUkng55c5wQnAMibbxQ4Dk14VorRWcIgqyYe8qoqw/hfGnTjgrJ9vWIYrQOXPtAnNQmXgoBme3fmXpr7UVD4kHks6T/ioG47zwH3WLMAf+mHqfyfJKmUJG4yQutTtFQVvogOR3FNRnqyFPSus8vMhvqrgOAEmBQAB47mEOvrDv8//efPH5nKZnclbVNdck=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
#script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi
