language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: lXa+AZ0xSGdNDKOKQIe94mFamAVEXE0zpxgLubp1uYvWqMktRYZrkgtcKFXVHsJx4t4ZAtzOqnPRSKY007CpXqN9283cHd5Uh4k4PjiZlWLFV9XqsEn3zKSojmfUoMMzhjUjii9A5WxH0gDCfDVcr+1c8m4hL1LlIAB3p1jfg/7OvhDgEu1q6yjczBCSAp0XUb8QBNAmkgiYfOCkmQKjG4V1L4b/tDBMhlfO1J6FBn6UPTqLF4doun+sFNjybKs3sCTj49R0E1bgMdRicp0ZIbQU8oUa9lTJaKG4r322IgOWzfvhrAASve40y/7tN5mkayLL5v0kfmGltBzFZf5mIGcpxdcuY3Ydbmru2S9d2/2jpQneGTq6vroG3FLCrE0rWE1NQzWdE44WW3gPO5zhPZbL/FOQEZAu8gSQyY0Ccsjg0EwPS71FqwdclPVL+nl/PH2bavvJKs9w/9uQsXmp86uxDDZWI9Gkj4ljZqYaBDNeJfxFQLiAW4saKlqHZkxGUHP2TgNR1oH5DrbA3hjpruUzR4yEUiNQhP84xCQU/cMXUrEUHibsk4E8p4a7gZQ6tbxlkZcf0P34qme8oTdJYorslEJg+BMyAMeDvnuu6MbtIyG1RMq1HR2LQhmVjIm4GAn6GTIcbglpHISjB6ER0Z6nollm4SQcGijF13j+k00=
  - secure: m2ySXGFo9dKoYz+8DGTpGY6dn+2NjVCo1Qyhy03V0Udn51koLpL6JMBhdcjO7DFf30aFCCEl1GqL0gPu0+pXHPfS1qePSN/jnn54lVeh7kW4RkcJxfHHKB7jT+4qXkGLiIRduSoYxvakoOQ66auN1ANnD4Oe6JjkqVqHdPsXoCuLH5bY9Lzq8cAbY1Q6lRe59QwqV6FtpYpaDM1n+ge5I9GHrgf3QQlE4Ztmtv7BhuzBa6usa1TYqPpaLzM6ILV9Xz3hjQzwzxeidm460Q67nPb48vF8uzf39OK2f/1ArLIzI8/a43mMThuvWsDPcB9TZlHscYtImDpZoe+Fmwb+yVRuFyJeYCuvIExtfWBbcIEcMhN+F302aRlUbNYm/3nSg52QYFR4NPKLISezd4tHnF1X8zebmV5qU4uUiHiF4EoMDGZufOIrqzHbzh/S6CB2j5us95v3/uEhLgsTWo0wzXtj7RZ/nGA9yT3qVlSBA9agSnJ5xvhVnFLd2T5t3PRZ3gN3N4eAA912yk77MqDviYHJl4Kcf4ed3IbEYAUYNy6KNP+FFGyMa2tphaPqYfjDvl4rjtQxUBaxUdTY9VKy77YNsh9U5hr/KS1tDC2lWKz9aGN7HHkz50D9tMyuwdcY+Kx/Nxz0TU5mZLag3KAsC2pu0Ano5Th0r4MH0i4zo7I=
  - secure: sINH8j3UKRgVyz0XzVRH7wlMa86VAu+GV+g5ENQi1JZIV9YjkjirSKvjol22LFG04KEk4b0Te9rf7zjoISW9yfVALshmUPXv8pLUPXYWvzAy6bZpiWQ2hLC8DEnsImFD3mFXIjWUGK18oY8f4kvMcb8KZVwUzs424WNFYzgb1UXyvvcJ8EkuLC78jfgLsGf9n2yMPC9Q1qxE+C7VDhDe3Htd97txBSY3Goyf/FnUH34g0ZKwMfAjijxQZiILah+1OIPUmPkt0M15I4g8eyKaQ71nKv6HKbuelogmVP5el5/ehiMeZVJ0ctS2ArLrWwI/4bIkE7QaD1ojhLInLbfnmbSzjut6f9SJf6zF/Z6rHHzegr8P2JH5UKo9EPVLn+gQfjlcaTvll55lSeP62yWsA3GY+jng9lmLGMoOlkRY48UI+xLSUICb1j2jWkdsLuspCPPzp87CtQ/n+YXgz8hjvcJxvyLU58BpKNIgerhU8hEnrb8xsVKnYIswIZXRakdRmaQxrfjp/hq2XtXOrFVqRSaRgpqF7JfEnYOp+3JkyQV/Waf5HWP0GnrHq+clR4BNMdbHCD7TtLZuy8GAq280uYGHArwzRwKeP7MAdV1vaerg5d/5+pJJ7WMDWroQ2azrcAC3jysFaQ61u8zfrq/zgrGoyNSVSURcGT19jURae6g=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi