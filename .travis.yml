language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: PQVVmjvfEfdi7MBl1k/W227gY9bpTW0YL01mGQBF/jnn7nNF1bBOu74p+EcbsheMbGx7aTB6ueMMEaA1/XH0B7+Zbzw6pffBQ5ewgn8UafmV3O9YKOXmM+Fp5a6j3a29lg3Z/9emOxxu7kLR1dzqP8vOfd8XyaYv0iGtw7iAhEFXhsr0C+qcMC6VCyoOl9r4pC32WzAs45w0AwZhElPwqdYNPUe6V0IOzINIRpJD03wtLDSXxDv+4r6LmjU2BC6pq0smNBkX/8b+NRxZPXjEvnU1UTVLkCNdRl5t9gJiKabvlde4pYbg9OjVg6GhSzP87X6FUZRvOJq8M/1YIndjuvfA+7SfCfnBpX9yXuVJ5/if7C62CuONQ0N6E8trgKZ2lZ3BSOi75SHuzqn1CTe3cTeYa6s/JbVX7ZXhVCTt8ocLaiPDb/utw13aaRfx6uagwisMtOtEJ1r8Q5CHnoMK7ofYz297e/8SV7pQ41UgRB5UGbGXvbbl7dy/yE91qeJA2Lc48wCQAbrnSHPVlZkv/sBiOdfY6esRNjhTcAZIe4h9O5n+88/gmeIGE6Zm7JkbbMumRpL2ciKxL2VUAQHY3OsfIBO33PRZQQK1L5tkJODJzGU2ckLvdThS/5c4m7p/HKFPa0EMvHCmuuLZhtfCSvqQoCqr2wwofMkuwwIJ4DE=
  - secure: Wu+EdHfUmSYsE/w5x0p7ZsfYpm3WFusVqbdVn36pGEWEj9VTQBcRbqm1cgL61xWpMtNU0bNjK4xPRmRZhVvdSA0bmQmb9v6/SiEof4CiF8QtE85vQz8jmrcsJMdidPQBroKRg1Bm5dj+1+bY7x0fA0wtoAu60ZWFm1h8adW0zDTU9RadzLTTiHdw1bvS3AvarvWEK6BZFHcJloEJKt4dTJXy5UxtmI67kGDm2AfnJwDsGkF6Oqnba2rlUyGgrSOmL1lTkUG9XXHQCDzDpgzGvy8Pm0YEzNCnwETczAdjGYbEnjP2C5UbqG+xnLXFhLl8HfNKUHOuqA2IAPtetRzgUB7/d/oEgDQ+2tbaG0Zi/XQUN6pNrn2HzE0QWWX93mn7Ivjt9MyQXFgqWwe4nvP/aYUWhbjF7IJPOdg/2741EguMf3R4PsVl67hbWW1oTmVO3Picoy6OBskCIeVS+pKvnLCRnbqXvKoi/tRVZxyl9+MvxINB/0ui/QzQsbS/EaNOW9b4MkDnF9kXzeYDLPDfbXgtUF43E6aOEYP/6eEQz7FBYTggw8keRBnQ4YQwUtPAlk0xb6C1RsjJxGnMjXCRcnMJtxRqtxi2g+ZEgEo6stci/sOAE5axXDspxNIjRuAjNYVif9wELqI1IiTz1Hr0nPpsNH0hlTEYjOXWlLqXjf0=
  - secure: iOeqxv664KpI7BtG9U9/gM+sqKyOCXRhPSTuYxxl3QIrwQHLZOy5fj6MTgQo1vR1bt0NAc9Qe65m50Z8j+YSu5QHiwJcWlC4sVJi0N8l6yVI94pqPz1+gJzcrdFVESII7toUEu+PLsOJ1htgD1cvGbYhanNRtB3o3W1rNPzWMOs+YubQytttPYPmwk292gB9KnO3KuSVgHTxh463+RjiE8f3BBTECoitfPBZYYdwidTiEjlrtyM25Yy7+TBWE1c6622e0VylFrucBVjhWHJtcKxVIw1gbnAWY2af3/CDPtQYjGbsSohBNxH1gAK+j81poBq/gqoNc7aFQWAiCbmEEUWY0NaqAPvLmd1O9LiViGWkFCnwKfylIailvGTDd9ARHqbnmWG47EhnmhOpZ6Mu4ru1CCBGbr+WLB+a5UB0XMT/IhBwyHvi5UITsobOX0j43wv8PW5e6RaSKFo8AL4JRBZrzKP+DZZOMb5gSrpkELxn5dzOmmo0kK+mzc+BKURO+1OMGpZ0OlH/ERmTfTJdT7qss6yYkOIlm8hly1fkRMIs3p6FVnZyR0noCwiDfTU5yan/xnyII4z7P0N4b6xpYT+0bYtrywz8q3lgbkcndaqRfn+YNqyjFhUWFEXQnhZNqKpmQu8DcouJ5Rn+kWi9JI9KoomRbq5C3b+LNDwzC5U=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi
