language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: SDxPuUtRXleAomrxUptzlWR8VnvSJ7aCVuDgExCBGvQqAp2XUgWpwkEqxoAuIyENkSLGTdRqu/KK3ApZBzYsKxBW6U+CkGsHjVyhYzIb3XSdu2JozPgFSEtw4H4d/kni5Th//O6mpqN+SdVtcKRFp6A5OWfBOoMIsKlVJypYbep8SyCDwkTmjiIBuA9Pu7lC3KE6wWOpAlqZ16qtfUu+/YHWrwn4gbvD0giuSM6c48+Y6Xe8XlnN00ImSLdxQ675ZoJDCQCrcfYlzf5Btxwku6Lps/WZuf+bTsYdIP9J5dUM7CvHh0aDtYs+BEnRhCb7F+kfIL6eUvclAJZie8AEWhMVnDdNiXyu3cKRex6SfMwoJUGYvSwKNy7TeJXrTltHmK12/ImNYLQ8Ajotxtr37cpyLT2GFhQ/01lrgYEKU6RHEwdwy5fgyE7QolL7q6NRHCa8kVSCfOR2osXeMwD56XoYlJywmw4T2nImEw7k+oLYsfjW7Zm7RjIkv+ODF1zp9hVrUkAPPEgqjCTBUYs3szp/VKIVVQAz6A8ciEBlD9lJ4sdRBjyXY7Z7X3yTMGJRJf/MMsHo8fHg7Ja5Dskcop7474MxCAT2cP6QPXWZ6qhy1PvnHDNjfUxf+kkjivA4D3ssI1JUBSf8OCiCZadGRpGEAYfYBH9wj4ei//jdnLg=
  - secure: L6xKiuHnRY0SP94/9pr2tNNPZaaey7G4ZuZ9/X6g4NsNVuRyORy23QPTUkuVJ1NjhbUPs7cpRLecXJkdPuOA2bk7Hr3HKw/f/+kE/WqJU3KWNETULx/6g+AHbMeRxUH9UeNBrHtPYupBJzt3i75SaTCILWzW/L2PHavoX6BPWkQr79GwKJgYCp4aKm0q/Oou8guWqRXh2bzOPYBF+1PI3bbJF3wq1WRt+zDWRHVT5H+V4A6SFvAuJllcZyX+KtHKjdH6UWNIbZ6jGCf8ODro8oaFiuxOJF6EKq5pl761g5HTjfXsiCQryv1lCvXxxoOspyxGPO2bQ8WFAt/hrql17i2qST82N04A7LGIrlf3tlT7CjCfpcScIIY8v9HFqhtGug2z1AbwG8uSr1L0fkksI05CXpNhrmPX/smSRuDBQH6ZJge5xSNGyEaeXTieJIFwHoKxCt7uDWJQrxwT6mmfdgMRHqlmJG2ULM7twCg7SR1iE19an3DbtHEIGwDzReaJAJyFHByqe54QXtHr92LZr5fX5GfJJoGa/oBwMd299E8M/RiTPmcV3o42/Z1tKjqgOEHwK6xXzRI89FoLP6QJiK+j34GmGmC3ZVeBD7cGN0D5je4bKRrG9arxz7JPVMmkwvL1heBM5R3su+3P1LkQ9M+RFitnjtWtgix9SQlXhjE=
  - secure: wqJm1codX/oJ6DkYEubg/H7NiAPdLZokDBK6lDrMSsbx7InisTRIBGf5+oED+KqnMqf1+4Ol1CV0ATwvm5CXcmrRgLAldX9Dby2vpe+GiBTWlXEoC87KPO8+L9zod8q+Tv/lOJ8am2eLiXfPTiiXr1zPBcqwKjCGTuBwNoVZhND0G/pKq8IKXHMhssNHyz9b6RkdpLuhvzqLaH43AocniB2x8uAd7YEJj5fOUOSe1FOUjyiZtuuZAhniVGOTPdW5ZOWf2TQdtFt+6WYubnlsY37sdodYQRY+J1dzMcYumpagbi8n0PKHIXxlffeWxJl9TJuW9rNGp5kL0xQW9Zdme3VcciYTBkE9ow2sXotiNAwxeKKy9rGPseCUWd4wKS2k4DQagPphN5xtgzwWerNKj7e/byhFJNSg6bJY/2N6HjLGsGZhLORlarlLhhwM4eKdDT6yNNRHsHtSoZ6TP+KB11gRz3Mbc5+zhtQgqc41BXQkM0fJZdv5o7IPtBUvJz0LCGr6WFI/OdkUR/A7wfMMI8ePUoc20vYaautUYQ4gIBwkxHT+1ezSozYTDDX8/gmQEEaZpODBq7xBAv0JfjeoNq7uVuFzwYTVDsbdNNHCDNtFp2pZQH7xt5OFu/AmexXEL+lftdZK/GaGODMCkPcS8QtWITfQL0hW6AOZ+2h7lQg=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi
