language: java
dist: trusty

jdk:
- openjdk8

env:
  global:
  - secure: eM2kF5oRKez1NdgA4vW8avVbB8sH4A4NYW1HUMDqRhXscMenGyG1I5niMKad5AYZvCeyLwhdiO40kDzbU/OkOvNTcP+jcG4jXTWBeAXNT1UCQPY68KoBoIJs0gO/VeOCQLniJ62nTPquHCbKBSQSw2aP64G0g/sZNI6b+9TVOPPOkMytD01CdT827HmfMMZdHjmAGxFbXOcdlMQkJwnZ8pZG4cx+QxASADVczALG8yJBDQSHagx4lHkr8jExifle8KKbCyUw7AV7mqP33X7KVBhjYFIrFuheQxMuUuDrHJQxm7HSNiBEBAooTdmt7TKzBinMySEVGE8ASS8W4GMztcu+rxqmm5JrPYABLYVL3Pydba5s641USdiOvYOuNxZx1sZY2HXD0j6qmHEdsUw/7zn8UGkyAw555tlMqr95kmCcMN+Hlv7i2Bfn724l3gEcnJxyIV6UAsdAML+e7Wyhv9oVqRw1Yk46KT9awV29Ue8sSG2DcEa1derL2u7ZlITw5QdZpBxhr5zmDfk7i09ah7P/jc4Ibkg3MgiBEABDZ6YBzMsi7PsL5JQBzPhPR0LpPI6scbuDMaLs14jbzUnyCLIO4lst0T233mmDlffCSrajr8P2BgUtVBq18klq05+gTV3ZPIoEqlrLe5NsGqDd86Pm3BI9gu5Zq1DPQ4eri68=
  - secure: kmUNbMOooATqcnZVxcmvcBwuQy3idzynx0GLR8UThDUu0od80xNPSrwc/rRwjg1xNkXmb1mnXecoeanqZTcrof6+X9jNAtjJQAO5WjEds6fG7RcyKMh7XyngCHNcuKxZlTXxpRnaSL4Q0sB2Qi71S3zXlfL3qdM3YoaDqF4NbSOPaTgiWAyZo0qXRWlQ/gNSURMBecQLEif0pf5NrEgO6dFrJBtYXEvk38tiqMGDkiLMnpCPxEctmvSR9u6sRBLsD3QxS84FLEXeVoKIlw4dh/uXbP9jTin5f2+UpFN1s8F+Hte8chDn+7Cd+DnpfgFpm9OPbjRQ04P7kEDBzSy9xQLxuEGQAgrDsMz9rR4rusGVxZ9Uce8bDyLkOMaWH5b+xSApLBmltA9Rn9+gVqcEw90k9wSOqmf9xWwh3wBaGgNfj5J5ku8DNGFKQvnbV2dwsaEtoRH0MRAjN2fAfKq2neLNvLBXA1Q/pTiwz3o7sg+m1zpNRQmsQd74AlUOIdtlv9hP7bDNV32XgQZveNygcYxZy09CdBAsu4CMLeP8dT5K9tBmUT8oRGNb9ZWpmBoK8kSv1UwGvX0nYBhOZl8VyAQATMpxpzu7xC2pyOlNHYZlGPjvwBRk6sCVgKr5JlzkQZ9dBx+bVrymlyPGHeFsYQ0hT0wiptPRKNSKm5W99t8=
  - secure: HttdWCIwTFtnDKmq6oBmATN5267eL7ASVEZza7Jc2+y8h5A2ALKUqZWeMy8HLJsk89fkO6FB5rRVPeE20/NVIot1iQLsND5ZvN5/df64nK1KrUEe37tPGWOZCxVXK871ScawLNej4c9MYf3wNU9fSV5+Td+81yjoZYpCvRrs7ustXnWpMgtpUXLA5iqI2OqUZhM6HUoMrO52zuJ/CYGQIlkOr7+Lp4JJIa6fYWmnam3QK9vkamkJFSY7c8ZcZ7oRiMc8UcggJRlB7Co24yLGdSnkV2ME1vqO838/zN49OGrVbfMLCxIWkY5NC2gmEa8j3ni07vlBQdladnMJS25jPLyyhjxWLwJ5S1G9pMI4H9FN1RblCGC7y0k4UuvMWjEyNC6v4mym57P5bUSYC+rADQ0TyBcV/mf1zZh+WAFeSXC9w8CMheTBbPLfqPBpE3+IWETxtB401X//VqdT6W67htYr25noPXQJkCXEuDj+oObva8uYodbVjGx8KnZhVPXfBk29Uxuz+cwbS/6c1zNlLMtaaHASnOJeIyCUkvuwsSh36eksEFWtMEGHTMFUodaeVUXMsGdau6S7wmDhXAD7NsA4goCcSWlVAmvgF6mT/LvQ4Ev/IFalyhv94CI/H/rzF2dilvfJ1nN8xgnZO16RTHt3bmUuSk3Z4E1IjZRfI7U=
cache:
  directories:
  - "$HOME/.m2"

install: mvn clean install -DskipTests=true -V -U
script: mvn test

after_success:
# Deploy to OSSHR
- if [[ $TRAVIS_PULL_REQUEST == "false" && ($TRAVIS_BRANCH == "master" || $TRAVIS_TAG) ]]; then
    openssl aes-256-cbc -K $encrypted_99232a7c999e_key -iv $encrypted_99232a7c999e_iv -in gpg.tar.gz.enc -out gpg.tar.gz -d;
    tar xvf gpg.tar.gz;
    mvn source:jar javadoc:jar deploy -Pdeploy -DskipTests=true --settings ./settings.xml;
  fi
